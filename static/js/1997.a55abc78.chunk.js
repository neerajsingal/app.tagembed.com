"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1997],{1997:(e,a,s)=>{s.r(a),s.d(a,{default:()=>U});var t=s(9950),l=s(45358),i=s(471),o=s(1093),r=s(4342),n=s(34483),c=s(21432),d=s(95942),m=s(97937),h=s(42074),x=s(88053),b=s(59051),u=s.n(b),p=s(18633),j=s(54810),g=s(26806),v=s(73878),f=s(80322),N=s(54480),y=s(4695),C=s.n(y),w=s(1391),A=s(52867),k=s(44414);const S=[{name:"Collaborator",width:160},{name:"Invited",width:130},{name:"Status",width:100},{name:"Permission",width:100},{name:"Invited By",width:120},{name:"Actions",width:70}];class D extends t.Component{constructor(){super(...arguments),this.state={loading:!0,userRole:null},this.getCollaborators=e=>{const{setCollaboratorList:a}=this.props;(0,f.xl)().then((s=>{const t=""==e.collaborator||0==e.collaborator.activeAccount?3:0,{workspace:l}=s.data.responseData;a(l),this.setState({loading:!1,userRole:t})})).catch((e=>{this.setState({loading:!1},(()=>{}))}))},this.modifyCollaborator=(e,a)=>{const{updateCollaboratorPermission:s,deleteCollaborator:t}=this.props;C().fire({title:"Are you sure?",text:"delete"==a?"Do you wish to continue and delete the chosen item?":"Modifying this setting will lead to alterations in permissions.",icon:"warning",showCancelButton:!0,confirmButtonText:"delete"==a?"Yes, delete it!":"Yes, change permission!",confirmButtonColor:"delete"!=a?"var(--bs-success)":""}).then((l=>{l.isConfirmed&&("delete"==a?t({collaborators:String(e)}):s(e))}))}}componentDidMount(){const{userData:e}=this.props;e&&this.getCollaborators(e)}componentWillReceiveProps(e){const{userData:a}=e;JSON.stringify(a)!=JSON.stringify(this.props.userData)&&this.getCollaborators(a)}render(){var e;const{loading:a,userRole:s}=this.state,{collaboratorList:t,userData:b}=this.props;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"subheader",children:(0,k.jsx)(l.A,{fluid:!0,children:(0,k.jsxs)("div",{className:"nav nav-underline",children:[(0,k.jsx)("div",{className:"nav-item",children:(0,k.jsx)(h.N_,{to:"/profile",className:"nav-link",title:"Profile",children:"Profile"})}),!b||""!=b.collaborator&&0!=(null===(e=b.collaborator)||void 0===e?void 0:e.activeAccount)?null:(0,k.jsx)("div",{className:"nav-item",children:(0,k.jsx)(h.N_,{to:"/transactions",className:"nav-link",title:"Plan Details",children:"Plan details"})}),(0,k.jsx)("div",{className:"nav-item",children:(0,k.jsx)(h.N_,{to:"/social-account",className:"nav-link",title:"Accounts",children:"Social accounts"})}),(0,k.jsx)("div",{className:"nav-item",children:(0,k.jsx)(h.N_,{to:"/collaborator",className:"nav-link active",title:"Collaborator",children:"Collaborator"})})]})})}),(0,k.jsx)("div",{className:"d-flex flex-column flex-column-fluid full-content",children:(0,k.jsx)(l.A,{className:"container-collaborator",children:(0,k.jsxs)(i.A,{children:[(0,k.jsxs)(i.A.Header,{className:"f-between d-flex",children:[(0,k.jsx)("h2",{className:"me-2 h4 my-3",children:"Collaborator panel"}),(0,k.jsx)("div",{className:"f-center",children:(0,k.jsxs)(h.N_,{to:"/collaborator/add",className:"btn btn-primary my-2 btn-sm",title:"Invite Collaborator",children:[(0,k.jsx)(j.gc,{icon:"plus"}),"Invite collaborator"]})})]}),(0,k.jsx)(i.A.Body,{children:(0,k.jsx)("div",{style:{minHeight:"calc(100vh - 240px)"},children:a?(0,k.jsx)(p.a,{}):t.length>0?(0,k.jsx)("div",{className:"table-responsive",style:{minHeight:300},children:(0,k.jsxs)(o.A,{size:"lg",className:"align-middle gs-0 gy-3",children:[(0,k.jsx)("thead",{className:"thead-light",children:(0,k.jsx)("tr",{children:S.map(((e,a)=>(0,k.jsx)("th",{className:"fw-bold text-nowrap ".concat("Actions"==e.name?"text-end":""),style:{minWidth:e.width},children:e.name},a)))})}),(0,k.jsx)("tbody",{children:t.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(x.A,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserCollab.name"],profileUrl:e["UserCollab.picture"],networkId:""}),(0,k.jsxs)("div",{className:"overflow-hidden",style:{maxWidth:200},children:[(0,k.jsx)("p",{className:"text-gray-dark fw-semibold mb-0 text-ellipsis fs-8",children:e["UserCollab.name"]}),(0,k.jsx)("span",{className:"fs-9 mb-0 text-gray-500 fw-medium text-ellipsis d-block",children:e["UserCollab.emailId"]})]})]})}),(0,k.jsxs)("td",{children:[(0,k.jsx)("p",{className:"text-gray-900 fw-medium mb-0 text-nowrap",children:u()(e["UserCollab.created"]).format("Do MMM YYYY")}),(0,k.jsx)("span",{className:"fs-9 fw-medium text-gray-500 text-nowrap",children:u().utc(new Date(e["UserCollab.created"])).format("h:mm a")})]}),(0,k.jsx)("td",{children:2!=e.status?(0,k.jsx)("label",{className:"form-check form-switch",children:(0,k.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1==e.status,onChange:()=>this.props.updateStatus(e)})}):(0,k.jsx)(r.A,{bg:"",className:"badge-light-warning",children:"Pending"})}),(0,k.jsx)("td",{children:(0,k.jsx)("div",{className:"d-flex align-items-center",children:3==s?(0,k.jsxs)(n.A,{style:{minWidth:200},children:[(0,k.jsx)(n.A.Toggle,{variant:"secondary",className:"d-flex align-items-center w-100 justify-content-between bg-white fs-9",children:1==e.role?"Admin":"Manager"}),(0,k.jsxs)(n.A.Menu,{className:"w-100",children:[(0,k.jsx)(n.A.Item,{onClick:()=>1==e.role?(0,A.r$)("Collaborator is already an admin."):this.modifyCollaborator(e,"change"),children:"Admin"},0),(0,k.jsx)(n.A.Item,{onClick:()=>2==e.role?(0,A.r$)("Collaborator is already a manager."):this.props.navigate("/collaborator/edit/".concat(e.id,"?permission=1")),children:"Manager"},1)]})]}):1==e.role?"Admin":"Manager"})}),(0,k.jsx)("td",{children:(0,k.jsxs)("div",{className:"d-flex align-items-center cursor-pointer text-decoration-none",children:[(0,k.jsx)(x.A,{className:"symbol symbol-36 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:36,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserAdmin.name"],profileUrl:e["UserAdmin.picture"]}),(0,k.jsx)("p",{className:"text-gray-dark fw-medium mb-0 text-ellipsis",children:e["UserAdmin.name"]})]})}),(0,k.jsx)("td",{className:"pr-0 text-end",children:(0,k.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,k.jsx)(c.A,{placement:"top",overlay:(0,k.jsx)(d.A,{children:"Edit"}),children:(0,k.jsx)(h.N_,{to:"/collaborator/edit/".concat(e.id),id:"col-edit-".concat(e.id),className:"btn btn-icon btn-sm btn-active-primary ms-2",title:"Edit Collaborator",children:(0,k.jsx)(j.gc,{type:"solid",icon:"pen"})})}),(0,k.jsx)(c.A,{placement:"top",overlay:(0,k.jsx)(d.A,{children:"Remove"}),children:(0,k.jsx)(m.A,{id:"col-remove-".concat(e.id),variant:"icon",size:"sm",className:"btn-active-danger ms-2","aria-label":"delete",onClick:()=>this.modifyCollaborator(e.id,"delete"),children:(0,k.jsx)(j.gc,{type:"solid",icon:"trash-can"})})})]})})]})))})]})}):(0,k.jsx)("div",{className:"f-center",style:{minHeight:"calc(100vh - 240px)"},children:(0,k.jsx)(g.A,{title:"Uh-oh! Nothing to see here.",desc:"You can start adding new collaborators here.",icon:"user-plus",button:{text:"Invite Collaborator",action:()=>this.props.navigate("/collaborator/add")},isFullScreen:!1})})})})]})})})]})}}const U=(0,v.Ng)((e=>{var a,s;return{collaboratorList:e.collaborator.collaboratorList,userData:null===(a=e.authorized)||void 0===a||null===(s=a.userData)||void 0===s?void 0:s.user_data}}),(e=>({deleteCollaborator:a=>e((0,f.gS)(a)),setCollaboratorList:a=>e({type:N.J_g,payload:a}),updateCollaboratorPermission:a=>e((0,f.LA)(a)),updateStatus:a=>e((0,f.yB)(a))})))((0,w.A)(D))}}]);